
/*!
 * air-menu-ui v0.0.1 by tsov
 * Copyright 2014 Air-Menu
 */
angular.module("air-menu-ui.animations",[]),angular.module("air-menu-ui",["air-menu-ui.filters","air-menu-ui.services","air-menu-ui.directives","air-menu-ui.controllers","air-menu-ui.templates","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","breakpointApp"]),angular.module("air-menu-ui.controllers",[]),angular.module("air-menu-ui.directives",["air-menu-ui.directives.login-box","air-menu-ui.directives.navbar"]),angular.module("air-menu-ui.directives.login-box",[]).directive("loginBox",function(){return{scope:{handler:"="},restrict:"E",templateUrl:"/air-menu/login-box.html",controller:["$scope","$element","$attrs",function(a){a.onSubmit=function(){a.pending=!0,a.handler&&a.handler(a.username,a.password,a.callback)},a.callback=function(b){a.pending=!1,a.failure=!b}}]}}),angular.module("air-menu-ui.directives.navbar",[]).directive("navbar",function(){return{scope:{session:"="},restrict:"E",templateUrl:"/air-menu/navbar.html",controller:["$scope",function(a){a.logout=function(){a.session.destroy()}}]}}),angular.module("air-menu-ui.filters",[]),angular.module("air-menu-ui.services",["air-menu-ui.services.connector","air-menu-ui.services.session","air-menu-ui.services.store","air-menu-ui.services.models"]),angular.module("air-menu-ui.services.connector",[]).factory("connector",["$rootScope","$http","store",function(a,b,c){var d={fetch:function(d,e,f,g,h,i,j){if(!j||c.valid("access_token")){var k=c.valid("access_token")?c.get("access_token").token:"";b({method:d,url:e,params:f||{},data:g||{},headers:{Accept:"application/json",Authorization:"Bearer "+k}}).success(function(a,b){h&&h(a,b)}).error(function(b,c){401==c&&a.$broadcast("air-menu-ui.event.unauthorized",b),i&&i(b,c)})}},get:function(a,b,c,d,e){this.fetch("GET",a,b,null,c,d,e)},post:function(a,b,c,d,e){this.fetch("POST",a,b,null,c,d,e)}};return d}]),angular.module("air-menu-ui.services.models",["air-menu-ui.services.models.me","air-menu-ui.services.models.access-tokens"]),angular.module("air-menu-ui.services.models.access-tokens",[]).factory("AccessTokens",["connector",function(a){var b="/api/oauth2/access_tokens";return{create:function(c,d,e){a.post(b,c,d,e)}}}]),angular.module("air-menu-ui.services.models.me",[]).factory("Me",["connector",function(a){var b="/api/v1/me";return{get:function(c,d){a.get(b,null,c,d,!0)}}}]),angular.module("air-menu-ui.services.session",[]).factory("session",["$rootScope","AccessTokens","store","Me",function(a,b,c,d){var e={set:function(a){angular.extend(this,a)},isSet:function(){return!!this.access_token&&!!this.access_token.token},restore:function(){c.has("access_token")&&c.valid("access_token")&&(this.set({access_token:c.get("access_token")}),this.getCurrentUser())},create:function(a,b,c){var d=this.credentialsParams({username:a,password:b});this.getAccessToken(d,c)},refresh:function(){if(this.isSet()){var a=this.refreshParams(this.access_token.refresh_token);this.getAccessToken(a)}},destroy:function(){this.access_token=void 0,this.user=void 0,c.empty("access_token"),a.$broadcast("air-menu-ui.event.userLoggedOut")},getAccessToken:function(a,d){var e=this;b.create(a,function(a){e.set({access_token:a.access_token}),c.set("access_token",a.access_token),e.getCurrentUser(d)},function(){d&&d(!1)})},getCurrentUser:function(b){var c=this;d.get(function(d){c.set({user:d.me}),a.$broadcast("air-menu-ui.event.userLoggedIn"),b&&b(!0)},function(){b&&b(!1)})},credentialsParams:function(a){return this.baseParams({grant_type:"password",username:a.username,password:a.password})},refreshParams:function(a){return this.baseParams({grant_type:"refresh_token",refresh_token:a})},baseParams:function(a){var b={client_id:"468e35cd0cef4a31a3818bcadeb36dc6ed5e919ee64fce88c5296d6b48bfb529",client_secret:"13e8a3df7bd4e14ed41d64d2cce7b42d722611ae3f89130e700959a047758f3b",scope:"basic user"};return angular.forEach(a,function(a,c){b[c]=a}),b}};return e}]),angular.module("air-menu-ui.services.store",[]).factory("store",function(){var a={set:function(a,b){b&&(localStorage[a]=btoa(JSON.stringify(b)))},get:function(a){return JSON.parse(atob(localStorage[a]))},has:function(a){return!!localStorage[a]},empty:function(a){localStorage[a]=null},valid:function(a,b){var c;try{c=JSON.parse(b?atob(b):atob(localStorage[a]))}catch(d){c=!1}return c}};return a}),angular.module("air-menu-ui.templates",["/air-menu/login-box.html","/air-menu/navbar.html"]),angular.module("/air-menu/login-box.html",[]).run(["$templateCache",function(a){a.put("/air-menu/login-box.html",'<form role="form" class="login-box" ng-submit="onSubmit()">\n	<div ng-if="failure" class="alert alert-danger">\n		Oh no! You username/password combination seems to fail!\n	</div>\n	<div class="form-group">\n		<div class="input-group">\n			<span class="input-group-addon"><i class="fa fa-user"></i></span>\n			<input type="text" class="form-control" id="username" placeholder="Username" ng-model="username">\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="input-group">\n			<span class="input-group-addon"><i class="fa fa-lock"></i></span>\n			<input type="password" class="form-control" id="password" placeholder="Password" ng-model="password">\n		</div>\n	</div>\n	<div class="checkbox">\n		<label>\n			<input type="checkbox" /> Remember Me\n		</label>\n	</div>\n'+"	<button type=\"submit\" class=\"btn btn-primary btn-block {{pending || !username || !password ? 'disabled' : ''}}\" {{pending ? 'disabled' : ''}}>SIGN IN</button>\n</form>")}]),angular.module("/air-menu/navbar.html",[]).run(["$templateCache",function(a){a.put("/air-menu/navbar.html",'<nav class="navbar navbar-default" role="navigation">\n	<div class="container-fluid">\n		<div class="navbar-header">\n			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu">\n				<span class="sr-only">Toggle navigation</span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n			</button>\n			<a href="#" class="navbar-brand">AirMenu</a>\n		</div>\n\n		<div ng-if="session.isSet()" class="collapse navbar-collapse" id="menu">\n			<ul class="nav navbar-nav navbar-right">\n				<li class="dropdown">\n					<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">{{session.user.name}} <b class="caret"></b></a>\n					<ul class="dropdown-menu">\n						<li><a href="#">Profile</a></li>\n						<li><a href="#/developer">Developerr</a></li>\n						<li class="divider"></li>\n						<li><a href="#" ng-click="logout()">Logout</a></li>\n					</ul>\n				</li>\n			</ul>\n		</div>\n	</div>\n</nav>')}]);