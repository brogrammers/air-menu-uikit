
/*!
 * air-menu-ui v0.0.1 by tsov
 * Copyright 2014 Air-Menu
 */
angular.module("air-menu-ui.animations",[]),angular.module("air-menu-ui",["air-menu-ui.filters","air-menu-ui.services","air-menu-ui.directives","air-menu-ui.controllers","air-menu-ui.templates","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","breakpointApp"]),angular.module("air-menu-ui.controllers",[]),angular.module("air-menu-ui.directives",["air-menu-ui.directives.login-box","air-menu-ui.directives.navbar","air-menu-ui.directives.resource","air-menu-ui.directives.application","air-menu-ui.directives.nav","air-menu-ui.directives.tab"]),angular.module("air-menu-ui.directives.application",[]).directive("oauthApplication",function(){return{scope:{application:"="},restrict:"E",templateUrl:"/air-menu/application.html",controller:["$scope",function(){}]}}),angular.module("air-menu-ui.directives.login-box",[]).directive("loginBox",function(){return{scope:{handler:"="},restrict:"E",templateUrl:"/air-menu/login-box.html",controller:["$scope","$element","$attrs",function(a){a.onSubmit=function(){a.pending=!0,a.handler&&a.handler(a.username,a.password,a.done)},a.done=function(b){a.pending=!1,a.failure=!b}}]}}),angular.module("air-menu-ui.directives.nav",[]).directive("nav",function(){return{restrict:"E",transclude:!0,templateUrl:"/air-menu/nav.html",replace:!0,scope:{handler:"="},controller:["$scope","$element",function(a){var b=a.tabs=[];a.select=function(c){angular.forEach(b,function(a){a.selected=!1}),c.selected=!0,a.handler(c)},this.addTab=function(c){0==b.length&&a.select(c),b.push(c)}}]}}),angular.module("air-menu-ui.directives.navbar",[]).directive("navbar",function(){return{restrict:"E",templateUrl:"/air-menu/navbar.html",controller:["$scope",function(a){a.$on("air-menu-ui.event.navbar.user",function(b,c){a.user=c})}]}}),angular.module("air-menu-ui.directives.resource",[]).directive("resource",function(){return{scope:{resource:"=",handler:"="},restrict:"E",templateUrl:"/air-menu/resource.html",controller:["$scope",function(a){a.select=function(b){angular.forEach(a.resource.methods,function(a){b!=a&&(a.selected=!1)}),b.selected=!b.selected}}]}}),angular.module("air-menu-ui.directives.tab",[]).directive("tab",function(){return{scope:{otitle:"@"},require:"^nav",restrict:"E",transclude:!0,templateUrl:"/air-menu/tab.html",replace:!0,link:function(a,b,c,d){d.addTab(a)}}}),angular.module("air-menu-ui.filters",[]),angular.module("air-menu-ui.services",["air-menu-ui.services.connector","air-menu-ui.services.store","air-menu-ui.services.models"]),angular.module("air-menu-ui.services.connector",["air-menu-ui.services.connector.me","air-menu-ui.services.connector.docs","air-menu-ui.services.connector.applications"]).factory("connector",["$rootScope","$http",function(a,b){var c={fetch:function(c,d,e,f,g){var h={method:c,url:d,headers:{"X-CSRF-Token":window.CSRF_TOKEN}};"POST"==c&&(h.data=e||{}),"GET"==c&&(h.params=e||{}),b(h).success(function(a,b){f&&f(a,b)}).error(function(b,c){401==c&&a.$broadcast("air-menu-ui.event.unauthorized",b),g&&g(b,c)})},get:function(a,b,c,d){this.fetch("GET",a,b,c,d)},post:function(a,b,c,d){this.fetch("POST",a,b,c,d)}};return c}]),angular.module("air-menu-ui.services.connector.applications",[]).factory("Applications",["connector",function(a){var b="/api/oauth2/applications";return{get:function(c,d){a.get(b,null,function(a){var b=a.oauth_applications;c(b)},d)},create:function(c,d,e,f){a.post(b,{name:c,redirect_uri:d},function(a){var b=a.oauth_application;e(b)},f)}}}]),angular.module("air-menu-ui.services.connector.docs",[]).factory("Docs",["connector","Doc",function(a,b){var c="/docs/",d=["v1","oauth2"];return{get:function(c,e){var f=this;this.finished=0;var g=[];angular.forEach(d,function(h){a.get(f.versionUrl(h),null,function(a){g.push({version:h,content:new b(a.docs)}),f.finished=f.finished+1,f.finished==d.length&&c(g)},e,!0)})},versionUrl:function(a){return c+a+".json"}}}]),angular.module("air-menu-ui.services.connector.me",[]).factory("Me",["connector","User",function(a,b){var c="/api/v1/me";return{get:function(d,e){a.get(c,null,function(a){var c=new b(a.me);d(c)},e,!0)}}}]),angular.module("air-menu-ui.services.models",["air-menu-ui.services.models.user","air-menu-ui.services.models.scope","air-menu-ui.services.models.doc"]),angular.module("air-menu-ui.services.models.doc",[]).factory("Doc",["Scope",function(a){var b=function(a){angular.extend(this,a),this.parseScopes()};return b.prototype.parseScopes=function(){angular.forEach(this.resources,function(b){angular.forEach(b.methods,function(b){b.scope=a.fromString(b.full_description),angular.forEach(b.params,function(b){b.scope=a.fromString(b.description)})})})},b}]),angular.module("air-menu-ui.services.models.scope",[]).factory("Scope",function(){var a=function(a){this.scopes=a};return a.prototype.has=function(a){for(var b in this.scopes)if(this.scopes[b]==a)return!0;return!1},a.prototype.isAdmin=function(){return this.has("admin")},a.prototype.isDeveloper=function(){return this.has("developer")},a.prototype.isOwner=function(){return this.has("owner")},a.prototype.isEmpty=function(){return 0==this.scopes.length},a.fromString=function(b){var c,d=/\|\|(.*)\|\|/g,e=d.exec(b);return c=e&&e[1]?e[1].split(" "):[],new a(c)},a}),angular.module("air-menu-ui.services.models.user",[]).factory("User",["Scope",function(a){var b=function(b){angular.extend(this,b),this.scope=new a(this.scopes)};return b.prototype.isDeveloper=function(){return this.scope.isDeveloper()},b.prototype.isAdmin=function(){return this.scope.isAdmin()},b.prototype.isOwner=function(){return this.scope.isOwner()},b}]),angular.module("air-menu-ui.services.store",[]).factory("store",function(){var a={set:function(a,b){b&&(localStorage[a]=btoa(JSON.stringify(b)))},get:function(a){return JSON.parse(atob(localStorage[a]))},has:function(a){return!!localStorage[a]},empty:function(a){localStorage[a]=null},valid:function(a,b){var c;try{c=JSON.parse(b?atob(b):atob(localStorage[a]))}catch(d){c=!1}return c}};return a}),angular.module("air-menu-ui.templates",["/air-menu/application.html","/air-menu/login-box.html","/air-menu/nav.html","/air-menu/navbar.html","/air-menu/resource.html","/air-menu/tab.html"]),angular.module("/air-menu/application.html",[]).run(["$templateCache",function(a){a.put("/air-menu/application.html",'<div class="container">\n    <div class="row">\n        <div class="col-lg-12">\n            <hr />\n            <h3>\n                <span ng-if="application.trusted" class="label label-success">Trusted</span> <i ng-if="!application.trusted" class="fa fa-unlock"></i> {{application.name}} <small>{{application.redirect_uri}}</small>\n            </h3>\n            <p style="word-break: break-all;"><strong>Client ID: </strong>{{application.client_id}}</p>\n            <p style="word-break: break-all;"><strong>Client SECRET: </strong>{{application.client_secret}}</p>\n        </div>\n    </div>\n</div>\n')}]),angular.module("/air-menu/login-box.html",[]).run(["$templateCache",function(a){a.put("/air-menu/login-box.html",'<form role="form" class="login-box" ng-submit="onSubmit()">\n	<div ng-if="failure" class="alert alert-danger">\n		Oh no! You username/password combination seems to fail!\n	</div>\n	<div class="form-group">\n		<div class="input-group">\n			<span class="input-group-addon"><i class="fa fa-user"></i></span>\n			<input type="text" class="form-control" id="username" placeholder="Username" ng-model="username">\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="input-group">\n			<span class="input-group-addon"><i class="fa fa-lock"></i></span>\n			<input type="password" class="form-control" id="password" placeholder="Password" ng-model="password">\n		</div>\n	</div>\n	<div class="checkbox">\n		<label>\n			<input type="checkbox" /> Remember Me\n		</label>\n	</div>\n'+"	<button type=\"submit\" class=\"btn btn-primary btn-block {{pending || !username || !password ? 'disabled' : ''}}\" {{pending ? 'disabled' : ''}}>SIGN IN</button>\n</form>")}]),angular.module("/air-menu/nav.html",[]).run(["$templateCache",function(a){a.put("/air-menu/nav.html",'<div class="tabbable">\n    <ul class="nav nav-tabs">\n        <li ng-repeat="tab in tabs" ng-class="{active:tab.selected}">\n            <a href="" ng-click="select(tab)">{{tab.otitle}}</a>\n        </li>\n    </ul>\n    <div class="tab-content" ng-transclude></div>\n</div>')}]),angular.module("/air-menu/navbar.html",[]).run(["$templateCache",function(a){a.put("/air-menu/navbar.html",'<nav class="navbar navbar-default" role="navigation">\n	<div class="container-fluid">\n		<div class="navbar-header">\n			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu">\n				<span class="sr-only">Toggle navigation</span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n			</button>\n			<a href="#" class="navbar-brand">AirMenu</a>\n		</div>\n\n		<div class="collapse navbar-collapse" id="menu">\n            <a ng-if="!user" href="#/login" class="btn btn-default navbar-right navbar-btn">Login</a>\n			<ul ng-if="user" class="nav navbar-nav navbar-right">\n				<li class="dropdown">\n					<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> {{user.name}} <b class="caret"></b></a>\n					<ul class="dropdown-menu">\n						<li><a href="#">Profile</a></li>\n						<li ng-if="user.isDeveloper()"><a href="#/documentation">API Documentation</a></li>\n                        <li ng-if="user.isDeveloper()"><a href="#/applications">Developer Apps</a></li>\n						<li class="divider"></li>\n						<li><a href="/logout">Logout</a></li>\n					</ul>\n				</li>\n			</ul>\n		</div>\n	</div>\n</nav>')}]),angular.module("/air-menu/resource.html",[]).run(["$templateCache",function(a){a.put("/air-menu/resource.html",'<div class="container">\n	<h1><i class="fa fa-rss"></i> <a href="" ng-click="click()">{{resource.name}}</a></h1>\n	<p class="lead">{{resource.short_description}}</p>\n	<div class="resource" ng-repeat="method in resource.methods">\n		<div ng-repeat="api in method.apis">\n            <div ng-click="select(method)">\n                <div class="method {{api.http_method}}" style="cursor: pointer;">{{api.http_method}}</div>\n                <div class="path" style="cursor: pointer;">{{api.api_url}}</div>\n            </div>\n            <div ng-if="method.selected" class="slide-down">\n                <div class="container">\n                    <div class="row">\n                        <div class="col-lg-10 col-lg-offset-1">\n                            <div ng-if="method.full_description">\n                                <h3>Description</h3>\n                                <p class="voffset3" ng-bind-html="method.full_description"></p>\n                                <hr />\n                            </div>\n                            <div ng-if="method.formats.length > 0">\n                                <h3>Available Formats:</h3>\n                                <span class="label label-info" ng-repeat="format in method.formats" style="margin-right:3px;">{{format}}</span>\n                                <hr />\n                            </div>\n                            <div ng-if="method.scope.scopes">\n                                <h3>Required Scopes:</h3>\n                                <span class="label label-primary" ng-repeat="scope in method.scope.scopes" style="margin-right:3px;">{{scope}}</span>\n                                <hr />\n                            </div>\n                            <div ng-if="method.params.length > 0">\n                                <h3>Parameters</h3>\n                                <div class="list-group">\n                                    <div class="list-group-item" ng-class="{true: \'list-group-item-warning\'}[!param.required]" ng-repeat="param in method.params">\n                                        <h4 class="list-group-item-heading">{{param.name}}</h4>\n                                        <p class="list-group-item-text" ng-bind-html="param.description"></p>\n                                        <p><strong>Expected: </strong>{{param.expected_type}}</p>\n                                        <p ng-if="!method.scope.isEmpty()">Scopes: <span class="label label-primary" ng-repeat="scope in param.scope.scopes" style="margin-right:3px;">{{scope}}</span></p>\n                                        <p ng-if="!param.required">Optional</p>\n                                    </div>\n                                </div>\n                                <hr />\n                            </div>\n                            <h3>Examples</h3>\n                            <pre ng-repeat="example in method.examples">{{example}}</pre>\n                            <hr />\n                            <div ng-if="method.errors.length > 0">\n                                <h3>Errors</h3>\n                                <div class="list-group">\n                                    <div class="list-group-item" ng-repeat="error in method.errors">\n                                        <h4 class="list-group-item-heading">{{error.code}}</h4>\n                                        <p class="list-group-item-text">{{error.description}}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n		</div>\n	</div>\n</div>')}]),angular.module("/air-menu/tab.html",[]).run(["$templateCache",function(a){a.put("/air-menu/tab.html","<div ng-class=\"{true: 'hidden'}[!selected]\" ng-transclude>\n\n</div>")}]);